# PacketBoard

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ—Ä–±–æ—Ä–¥–æ–≤ –≤ Minecraft —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –æ—Ç 1.12.2 –¥–æ 1.21.9.

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **üîÑ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 1.12.2 - 1.21.9 –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **üì¶ Packet-based –ø–æ–¥—Ö–æ–¥** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–∫–µ—Ç—ã –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –≤–µ—Ä—Å–∏—è–º–∏
- **‚òï Java 11** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –ª—é–±–æ–π –≤–µ—Ä—Å–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
- **‚ö° –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Folia** ‚Äî –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
- **üé® –ú–Ω–æ–∂–µ—Å—Ç–≤–æ text providers** ‚Äî MiniMessage, Adventure, BungeeCordChat, MiniPlaceholders
- **‚ú® –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏** ‚Äî —Å–ª–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- **üéØ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî Generic —Ç–∏–ø—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- **üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏–π –ø–æ —É—Å–ª–æ–≤–∏—è–º –∏ —Ç–∞–π–º–µ—Ä–∞–º
- **üìÑ Pager —Å–∏—Å—Ç–µ–º–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–∫–æ—Ä–±–æ—Ä–¥–∞–º–∏
- **üéÆ –ü—Ä–æ—Å—Ç–æ–π API** ‚Äî –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π fluent interface

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

<details>
<summary><b>Maven</b></summary>

```xml
<repositories>
    <repository>
        <id>jitpack.io</id>
        <url>https://jitpack.io</url>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>com.github.EternalHuman</groupId>
        <artifactId>PacketBoard</artifactId>
        <version>master-SNAPSHOT</version>
    </dependency>
</dependencies>
```

</details>

<details>
<summary><b>Gradle (Groovy)</b></summary>

```groovy
repositories {
    maven { url 'https://jitpack.io' }
}

dependencies {
    implementation 'com.github.EternalHuman:PacketBoard:master-SNAPSHOT'
}
```

</details>

<details>
<summary><b>Gradle (Kotlin DSL)</b></summary>

```kotlin
repositories {
    maven("https://jitpack.io")
}

dependencies {
    implementation("com.github.EternalHuman:PacketBoard:master-SNAPSHOT")
}
```

</details>

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```java
Board<String, Player> board = PacketBoard.newMiniMessageSidebar(
    "<gradient:#ff0000:#00ff00>–ú–æ–π —Å–µ—Ä–≤–µ—Ä</gradient>",
    plugin
);

board.addTextLine("<gold>–û–Ω–ª–∞–π–Ω:");
board.addUpdatableLine(player -> 
    "<white>" + Bukkit.getOnlinePlayers().size()
);
board.addBlankLine();
board.addTextLine("<gray>play.myserver.com");

board.addViewer(player);
board.updateLinesPeriodically(0, 20); // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
```

## üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

<details>
<summary><b>–° –∫–∞—Å—Ç–æ–º–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º –∏–≥—Ä–æ–∫–∞</b></summary>

```java
public class GamePlayer {
    private final Player bukkitPlayer;
    private int kills;
    private int wins;
    private int level;
}

Board<Component, GamePlayer> board = Board.<Component, GamePlayer>builder()
    .title(gamePlayer -> Component.text("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
    .plugin(plugin)
    .textProvider(new AdventureTextProvider())
    .playerFunction(player -> GamePlayerManager.get(player))
    .build();

board.addUpdatableLine(gamePlayer -> 
    Component.text("–£–±–∏–π—Å—Ç–≤: " + gamePlayer.getKills())
);

board.addUpdatableLine(gamePlayer -> 
    Component.text("–ü–æ–±–µ–¥: " + gamePlayer.getWins())
);

board.addUpdatableLine(gamePlayer -> 
    Component.text("–£—Ä–æ–≤–µ–Ω—å: " + gamePlayer.getLevel())
);

board.addViewer(player);
board.updateLinesPeriodically(0, 20);
```

</details>

<details>
<summary><b>–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫</b></summary>

```java
TextIterator titleAnimation = new TextSlideAnimation(
    "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
    ChatColor.GOLD,
    TextSlideAnimation.SlideDirection.LEFT_TO_RIGHT,
    2
);

Board<String, Player> board = PacketBoard.newMiniMessageSidebar(
    titleAnimation,
    plugin
);
```

</details>

<details>
<summary><b>–£—Å–ª–æ–≤–Ω—ã–µ –ª–∏–Ω–∏–∏</b></summary>

```java
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏–Ω–∏—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞
board.addConditionalLine(
    player -> "<green>VIP –ë–æ–Ω—É—Å—ã –∞–∫—Ç–∏–≤–Ω—ã",
    player -> player.hasPermission("server.vip")
);

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ª–∏–Ω–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π
BoardLine<String, Player> line = board.addUpdatableLine(player -> {
    if (player.getWorld().getName().equals("world_nether")) {
        return "<red>–í—ã –≤ –ê–¥—É!";
    } else if (player.getWorld().getName().equals("world_the_end")) {
        return "<light_purple>–í—ã –≤ –ö—Ä–∞–µ!";
    } else {
        return "<green>–û–±—ã—á–Ω—ã–π –º–∏—Ä";
    }
});
```

</details>

<details>
<summary><b>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏—è–º–∏</b></summary>

```java
Board<String, Player> board = PacketBoard.newMiniMessageSidebar(
    "<gradient:#ff0000:#00ff00>PvP –ê—Ä–µ–Ω–∞</gradient>",
    plugin
);

BoardLine<String, Player> killsLine = board.addUpdatableLine(player -> 
    "<gold>–£–±–∏–π—Å—Ç–≤: " + getKills(player)
);

BoardLine<String, Player> streakLine = board.addUpdatableLine(player -> 
    "<yellow>–°–µ—Ä–∏—è: " + getStreak(player)
);

// –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏–Ω–∏–∏
board.removeLine(killsLine);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ª–∏–Ω–∏–∏
board.updateLine(streakLine);

// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ª–∏–Ω–∏–∏
board.shiftLine(streakLine, 0); // –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ
```

</details>

<details>
<summary><b>SidebarPager - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–∫–æ—Ä–±–æ—Ä–¥–æ–≤</b></summary>

```java
Board<String, Player> infoBoard = PacketBoard.newMiniMessageSidebar(
    "<aqua>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</aqua>",
    plugin
);
infoBoard.addTextLine("<gold>–†–µ–∂–∏–º: SkyWars");
infoBoard.addTextLine("<gray>–ö–∞—Ä—Ç–∞: Islands");

Board<String, Player> statsBoard = PacketBoard.newMiniMessageSidebar(
    "<green>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</green>",
    plugin
);
statsBoard.addUpdatableLine(p -> "<white>–£–±–∏–π—Å—Ç–≤: " + getKills(p));
statsBoard.addUpdatableLine(p -> "<white>–°–º–µ—Ä—Ç–µ–π: " + getDeaths(p));

// –°–æ–∑–¥–∞–Ω–∏–µ pager —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ (100 —Ç–∏–∫–æ–≤)
SidebarPager<String, Player> pager = new SidebarPager<>(
    Arrays.asList(infoBoard, statsBoard),
    100, // 5 —Å–µ–∫—É–Ω–¥
    plugin
);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –≤—Å–µ —Å–∫–æ—Ä–±–æ—Ä–¥—ã
pager.addPageLine((page, maxPage, board) -> {
    board.addTextLine("<gray>–°—Ç—Ä–∞–Ω–∏—Ü–∞ " + page + "/" + maxPage);
});

// –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ –≤—Å–µ–º —Å–∫–æ—Ä–±–æ—Ä–¥–∞–º
pager.applyToAll(board -> board.updateLinesPeriodically(0, 20));

pager.show(player);
```

</details>

<details>
<summary><b>–° MiniPlaceholders</b></summary>

```java
Board<String, Player> board = PacketBoard.newMiniplaceholdersSidebar(
    "<gradient:#ff0000:#00ff00>–°–µ—Ä–≤–µ—Ä</gradient>",
    plugin,
    MiniMessage.miniMessage()
);

board.addTextLine("<gold>–ò–≥—Ä–æ–∫: <white><player_name>");
board.addTextLine("<aqua>–ë–∞–ª–∞–Ω—Å: <green>$<vault_eco_balance_fixed>");
board.addTextLine("<yellow>TPS: <server_tps>");

board.addViewer(player);
```

</details>

<details>
<summary><b>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫</b></summary>

```java
Board<String, GamePlayer> board = Board.<String, GamePlayer>builder()
    .title(gamePlayer -> {
        if (gamePlayer.isInCombat()) {
            return "<red><bold>–ë–û–ô!</bold></red>";
        }
        return "<gradient:#ff0000:#00ff00>–ú–æ–π —Å–µ—Ä–≤–µ—Ä</gradient>";
    })
    .plugin(plugin)
    .textProvider(new MiniMessageTextProvider(MiniMessage.miniMessage()))
    .playerFunction(player -> GamePlayerManager.get(player))
    .build();
```

</details>

## üéØ API Reference

<details>
<summary><b>PacketBoard (—Ñ–∞–±—Ä–∏–∫–∞)</b></summary>

–£—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ—Ä–±–æ—Ä–¥–æ–≤:

- `newMiniMessageSidebar()` ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MiniMessage
- `newMiniplaceholdersSidebar()` ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MiniPlaceholders
- `newAdventureSidebar()` ‚Äî —Å Adventure Components
- `newBungeeChatSidebar()` ‚Äî —Å BungeeCord BaseComponent[]
- `newSidebar()` ‚Äî —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º TextProvider

</details>

<details>
<summary><b>Board</b></summary>

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞–º–∏:**
- `addViewer(Player)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `removeViewer(Player)` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `removeViewers()` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
- `getViewers()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏—è–º–∏:**
- `addTextLine(String)` ‚Äî —Å—Ç–∞—Ç–∏—á–Ω–∞—è –ª–∏–Ω–∏—è
- `addUpdatableLine(Function)` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ª–∏–Ω–∏—è
- `addConditionalLine(Function, Predicate)` ‚Äî —É—Å–ª–æ–≤–Ω–∞—è –ª–∏–Ω–∏—è
- `addBlankLine()` ‚Äî –ø—É—Å—Ç–∞—è –ª–∏–Ω–∏—è
- `removeLine(BoardLine)` ‚Äî —É–¥–∞–ª–∏—Ç—å –ª–∏–Ω–∏—é
- `updateLine(BoardLine)` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ª–∏–Ω–∏—é
- `updateAllLines()` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ª–∏–Ω–∏–∏
- `shiftLine(BoardLine, offset)` ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–∏–Ω–∏—é

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º:**
- `setTitle(R)` ‚Äî —Å—Ç–∞—Ç–∏—á–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
- `setTitle(TextIterator)` ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
- `setTitle(Function)` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
- `updateLinesPeriodically(delay, period)` ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `bindWrappedTask(WrappedTask)` ‚Äî –ø—Ä–∏–≤—è–∑–∞—Ç—å –∑–∞–¥–∞—á—É –∫ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É

**–û—á–∏—Å—Ç–∫–∞:**
- `destroy()` ‚Äî –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

</details>

<details>
<summary><b>SidebarPager</b></summary>

- `show(Player)` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å pager –∏–≥—Ä–æ–∫—É
- `hide(Player)` ‚Äî —Å–∫—Ä—ã—Ç—å pager –æ—Ç –∏–≥—Ä–æ–∫–∞
- `switchPage()` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ä—É—á–Ω—É—é
- `addPageLine(PageConsumer)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
- `applyToAll(Consumer)` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ –≤—Å–µ–º —Å–∫–æ—Ä–±–æ—Ä–¥–∞–º
- `destroy()` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–∫–æ—Ä–±–æ—Ä–¥—ã

</details>

## üîß –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏

- ‚úÖ Bukkit/Spigot/Paper: **1.12.2 - 1.21.9**
- ‚úÖ Folia: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ Java: **11+**

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

**MIT License**

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ù–∞—à–ª–∏ –±–∞–≥ –∏–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ? –°–æ–∑–¥–∞–π—Ç–µ Issue!
